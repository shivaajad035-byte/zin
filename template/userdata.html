{% load widget_tweaks %}

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edit User Profile</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family:'Poppins',sans-serif;
    background:linear-gradient(135deg,#1f2c50,#3f5276);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:2rem;
    color:#fff;
}

.card {
    background: rgba(255,255,255,0.08);
    border-radius:15px;
    backdrop-filter:blur(15px);
    padding:2.5rem;
    max-width:900px;
    width:100%;
    box-shadow:0 10px 30px rgba(0,0,0,0.3);
}

h1 {
    text-align:center;
    font-size:2rem;
    color:#ff007a;
    margin-bottom:2rem;
}

.section-title {
    font-size:1.4rem;
    font-weight:600;
    color:#ff007a;
    margin:1.5rem 0 0.8rem;
    position:relative;
}
.section-title::after {
    content:'';
    position:absolute;
    left:0;
    bottom:-4px;
    height:2px;
    width:50px;
    background:#ff007a;
    border-radius:2px;
}

.profile-photo {
    display:flex;
    flex-direction:column;
    align-items:center;
    margin-bottom:2rem;
}
.profile-photo img {
    width:160px;
    height:160px;
    border-radius:50%;
    border:4px solid #ff007a;
    object-fit:cover;
    margin-bottom:1rem;
}
.upload-photo {
    background:#fff;
    color:#333;
    padding:0.8rem 2rem;
    border-radius:25px;
    cursor:pointer;
    text-align:center;
    font-weight:600;
}
.hidden-input { display:none; }

.form-group {
    margin-bottom:1rem;
    display:flex;
    flex-direction:column;
}
.form-group label {
    margin-bottom:0.3rem;
    font-weight:600;
    color:#ff77aa;
}
input, select, textarea {
    width:100%;
    padding:0.9rem 1rem;
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.2);
    background-color:rgba(255,255,255,0.15);
    color:#fff;
    font-size:0.95rem;
}
input:focus, select:focus, textarea:focus {
    border-color:#ff007a;
    box-shadow:0 0 10px rgba(255,0,122,0.5);
    outline:none;
}

.btn-save, .btn-logout {
    background:linear-gradient(135deg,#ff007a,#ff8c00);
    padding:1rem 2rem;
    border-radius:50px;
    font-weight:600;
    font-size:1rem;
    text-align:center;
    cursor:pointer;
    border:none;
    width:100%;
    margin-top:1rem;
    transition: all 0.3s ease;
}
.btn-save:hover, .btn-logout:hover {
    transform:translateY(-2px);
    box-shadow:0 5px 15px rgba(255,0,122,0.4);
}
.btn-logout { background:rgba(255,0,122,0.8); }

ul.messages {
    list-style:none;
    padding:0;
    margin-top:1rem;
}
ul.messages li {
    padding:0.7rem 1rem;
    border-radius:8px;
    margin-bottom:0.5rem;
    font-size:0.9rem;
}
ul.messages li.error { background:rgba(255,85,85,0.2); }
ul.messages li.success { background:rgba(85,255,85,0.2); }

footer {
    text-align:center;
    font-size:0.75rem;
    color:#ccc;
    margin-top:2rem;
}

/* Responsive Two-Column Layout */
@media(min-width:768px){
    .form-grid { display:grid; grid-template-columns:1fr 1fr; gap:1.5rem; }
}
</style>
</head>
<body>
<div class="card">
    <h1>Edit User Profile</h1>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Profile Photo -->
        <div class="profile-photo">
            <img src="{% if profile_form.instance.profile_image %}{{ profile_form.instance.profile_image.url }}{% else %}https://via.placeholder.com/150{% endif %}" id="profile-img">
            <label class="upload-photo">
                Upload Photo
                {{ profile_form.profile_image|add_class:"hidden-input" }}
            </label>
        </div>

        <!-- Form Grid -->
        <div class="form-grid">
            <!-- Personal Info -->
            <div>
                <div class="section-title">Personal Information</div>
                <div class="form-group">{{ profile_form.full_name.label_tag }}{{ profile_form.full_name }}</div>
                <div class="form-group">{{ profile_form.dob.label_tag }}{{ profile_form.dob }}</div>
                <div class="form-group">{{ profile_form.gender.label_tag }}{{ profile_form.gender }}</div>
                <div class="form-group">{{ profile_form.phone.label_tag }}{{ profile_form.phone }}</div>
                <div class="form-group">{{ profile_form.address.label_tag }}{{ profile_form.address }}</div>
                <div class="form-group">{{ profile_form.city.label_tag }}{{ profile_form.city }}</div>
                <div class="form-group">{{ profile_form.state.label_tag }}{{ profile_form.state }}</div>
                <div class="form-group">{{ profile_form.zip_code.label_tag }}{{ profile_form.zip_code }}</div>
                <div class="form-group">{{ profile_form.two_factor.label_tag }}{{ profile_form.two_factor }}</div>
                <div class="form-group">{{ profile_form.security_question.label_tag }}{{ profile_form.security_question }}</div>
                <div class="form-group">{{ profile_form.security_answer.label_tag }}{{ profile_form.security_answer }}</div>
            </div>

            <!-- Social Media & Education -->
            <div>
                <div class="section-title">Social Media</div>
                <div class="form-group">{{ social_form.facebook.label_tag }}{{ social_form.facebook }}</div>
                <div class="form-group">{{ social_form.twitter.label_tag }}{{ social_form.twitter }}</div>
                <div class="form-group">{{ social_form.instagram.label_tag }}{{ social_form.instagram }}</div>
                <div class="form-group">{{ social_form.linkedin.label_tag }}{{ social_form.linkedin }}</div>
                <div class="form-group">{{ social_form.website.label_tag }}{{ social_form.website }}</div>

                <div class="section-title">Education</div>
                <div class="form-group">{{ education_form.degree.label_tag }}{{ education_form.degree }}</div>
                <div class="form-group">{{ education_form.institution.label_tag }}{{ education_form.institution }}</div>
                <div class="form-group">{{ education_form.graduation_year.label_tag }}{{ education_form.graduation_year }}</div>
                <div class="form-group">{{ education_form.grade.label_tag }}{{ education_form.grade }}</div>
            </div>
        </div>

        <button type="submit" class="btn-save">Save Changes</button><br>
    </form>

    <a href="{% url 'logout' %}" class="btn-logout">Log Out</a>

    <!-- Messages -->
    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li class="{{ message.tags }}">{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}

    <footer>All rights reserved Â© 2025 Your Company.</footer>
</div>

<script>
const profileInput = document.querySelector('input[type="file"]');
profileInput.addEventListener('change', function(event){
    const image = document.getElementById('profile-img');
    if(event.target.files && event.target.files[0]){
        image.src = URL.createObjectURL(event.target.files[0]);
    }
});
</script>
</body>
</html>
